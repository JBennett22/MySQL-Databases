DROP DATABASE HPC;
CREATE DATABASE HPC;
USE HPC; #Default DB 

SET FOREIGN_KEY_CHECKS=1; #Disable ALL foreign key constraint checks

CREATE TABLE CPU
	(SerialN 	CHAR(10)		NOT NULL,
	Cores		INT 			NOT NULL,
	Clockspeed	FLOAT			NOT NULL,
	Cost 		DECIMAL(10,2)	NOT NULL,
    PRIMARY KEY(SerialN)
    );

CREATE TABLE GPU
	(SerialN	CHAR(10)		NOT NULL,
	Cores		INT 			NOT NULL,
	ComputeConfig	CHAR(5)		NOT NULL,
	Cost 		DECIMAL(10,2)	NOT NULL,
    PRIMARY KEY(SerialN)
    );
    
CREATE TABLE COMPUTER
	(AID		INT				NOT NULL,
	CSN			CHAR(10)		NOT NULL,
	GSN			CHAR(10)		NOT NULL,
	AssemblyCost DECIMAL(10,2)	NOT NULL,
    PRIMARY KEY(AID),
    UNIQUE(CSN,GSN),
    FOREIGN KEY(CSN) REFERENCES CPU(SerialN),
    FOREIGN KEY(GSN) REFERENCES GPU(SerialN)
    );
    
CREATE TABLE TASK
	(TID		INT				NOT NULL,
	TDesc		VARCHAR(50)		NOT NULL,
	AID			INT				NOT NULL,
	StartTime 	DATETIME		NOT NULL,
    EndTime 	DATETIME,
    Performance INT				NOT NULL,
    PRIMARY KEY(TID),
    FOREIGN KEY(AID) REFERENCES COMPUTER(AID),
    CHECK ((Performance>0) AND (Performance<11))
    );

INSERT INTO CPU
	VALUES
('AAAAA11111',32, 8.56,10000.51),
('BBBBB22222',100, 9.86,50000.51),
('CCCCC33333',64, 8.86,30000.51),
('DDDDD44444',110, 10.56,70000.51),
('EEEEE55555',72, 8.56,20000.51),
('FFFFFFFFFF',90, 8.16,27000.51);


INSERT INTO GPU
	VALUES
('ZZZZZ00000',12000, 'Q1Z11',55000.51),
('YYYYY99999',11000, 'Q1Z33',45000.51),
('XXXXX88888',8000, 'Q1Z44',35000.51),
('VVVVV77777',10000, 'Q1Z66',40000.51),
('WWWWW66666',9000, 'Q1Z55',30000.51),
('UUUUUUUUUU',9000, 'Q1Z66',36000.51);

    
INSERT INTO COMPUTER
	VALUES
(101,'AAAAA11111','ZZZZZ00000',100.51),
(202,'BBBBB22222','YYYYY99999',100.51),
(303,'CCCCC33333','XXXXX88888',100.51),
(404,'DDDDD44444','VVVVV77777',100.51),
(505,'EEEEE55555','VVVVV77777',9000.51),
(20211007,'BBBBB22222','XXXXX88888',100.51),
(707,'AAAAA11111','VVVVV77777',9999.51),
(808,'DDDDD44444','YYYYY99999',100.51),
(909,'CCCCC33333','WWWWW66666',100.51);

INSERT INTO TASK
	VALUES
(1,'DESC1',101,'2021-05-17 15:00:00','2021-05-19 17:00:00',1),
(2,'DESC2',202,'2021-05-17 15:00:00',NULL,10),
(3,'DESC3',303,'2021-05-17 15:00:00','2021-05-20 17:00:00',10),
(4,'DESC4',404,'2021-05-17 15:00:00','2021-05-20 17:00:00',10),
(5,'DESC5',505,'2021-05-17 15:00:00','2021-05-20 17:00:00',10),
(6,'DESC6',20211007,'2021-05-17 15:00:00','2021-05-20 17:00:00',10),
(7,'DESC7',20211007,'2021-04-17 15:00:00','2021-04-20 17:00:00',10),
(8,'DESC8',101,'2021-05-17 16:00:00','2021-05-18 17:00:00',1),
(9,'DESC9',202,'2021-05-19 15:00:00','2021-05-20 17:00:00',10),
(10,'DESC10',303,'2021-05-07 15:00:00','2021-05-10 17:00:00',10),
(11,'DESC11',101,'2021-05-17 19:00:00','2021-05-21 17:00:00',1);
