DROP DATABASE IF EXISTS CSPORTSORGANIZATION;
CREATE DATABASE CSPORTSORGANIZATION;
USE CSPORTSORGANIZATION; #Default DB 

SET FOREIGN_KEY_CHECKS=0; #Disable ALL foreign key constraint checks

CREATE TABLE UNIVERSITY
(UCode INT NOT NULL,
UniversityName 	VARCHAR(30) NOT NULL,
Division CHAR NOT NULL,
SportsMascot VARCHAR(30) NOT NULL,
PRIMARY KEY(UCode),
CHECK ('1'<=Division<='3'));

CREATE TABLE STUDENTATHLETE
(SAID CHAR(10) NOT NULL,
 LName VARCHAR(30) NOT NULL,
 FName VARCHAR(30) NOT NULL,
 UCode INT NOT NULL,
 Major VARCHAR(30),
 PRIMARY KEY(SAID),
 FOREIGN KEY(UCode) REFERENCES UNIVERSITY(UCode)); 

CREATE TABLE TEAM
(TeamID INT NOT NULL,
 UCode INT NOT NULL,
 Sport VARCHAR(30) NOT NULL,
 HeadCoachLName VARCHAR(30) NOT NULL,
 CaptainSAID CHAR(10),
 PRIMARY KEY(TeamID),
 UNIQUE(UCode,Sport),
 FOREIGN KEY(UCode) REFERENCES UNIVERSITY(UCode),
 FOREIGN KEY(CaptainSAID) REFERENCES STUDENTATHLETE(SAID));
 
CREATE TABLE PLAYSFOR
(SAID CHAR(10) NOT NULL,
 TeamID INT NOT NULL,
 StartDate DATE NOT NULL,
 EndDate DATE,
 PRIMARY KEY (SAID,TeamID),
 FOREIGN KEY(SAID) REFERENCES STUDENTATHLETE(SAID),
 FOREIGN KEY(TeamID) REFERENCES TEAM(TeamID));

CREATE TABLE GAME
(GID INT NOT NULL,
 HomeTID INT NOT NULL,
 VisTID INT NOT NULL,
 HomeScore INT,
 VisScore INT,
 StartTime DATETIME NOT NULL,
 EndTime DATETIME,
 PRIMARY KEY(GID),
 FOREIGN KEY(HomeTID) REFERENCES TEAM(TeamID),
 FOREIGN KEY(VisTID) REFERENCES TEAM(TeamID));



INSERT INTO UNIVERSITY 
	VALUES
(1,'Coridsville','1','Malloc'),
(2,'Barinton','1','Marshal'),
(3,'Tarynton','2','Manatee'),
(4,'Felston','3','Mountain-climber');

INSERT INTO STUDENTATHLETE
	VALUES
('1111111111','Smith','Joan',1,'CSE'),
('2222222222','Edwards','John',1,'ENGL'),
('3333333333','Kusman','Ron',1,'HUMA'),
('4444444444','Jerome','Anthony',1,NULL),
('5555555555','Rabel','Steven',2,'MATH'),
('6666666666','Sariff','Sara',2,'CSE'),
('7777777777','Dolan','Tamara',2,'CHEM'),
('8888888888','Smith','Robert',3,'BIOE'),
('9999999999','Camaro','Melvin',3,NULL),
('AAAAAAAAAA','Samadros','Adia',3,'ELEC');

INSERT INTO TEAM
	VALUES
(101,1,'Foosball','Pendragon','1111111111'),
(102,2,'Foosball','Albinville','5555555555'),
(103,3,'Foosball','Kepler','8888888888'),
(201,1,'Air Hockey','Dragonuv','1111111111'),
(202,2,'Air Hockey','Bennington','6666666666'),
(301,1,'Axe Throwing','Carisou',NULL);

INSERT INTO GAME
	VALUES
(1001,101,102,5,1,'2020-08-17 15:00:00','2020-08-17 17:00:00'),
(1002,101,103,3,2,'2020-09-12 18:00:00','2020-09-12 18:00:00'),
(1003,102,103,4,2,'2020-10-17 14:00:00','2020-10-17 17:00:00'),
(1004,102,101,5,3,'2020-10-31 18:00:00','2020-10-31 20:00:00'),
(1005,101,103,3,1,'2020-11-18 16:00:00','2020-11-18 18:00:00'),
(1006,101,102,NULL,NULL,'2020-11-26 18:00:00',NULL),
(2001,201,202,5,2,'2020-08-31 17:00:00','2020-08-31 19:00:00'),
(2002,202,201,1,4,'2020-10-31 12:00:00','2020-10-31 14:00:00'),
(2003,201,202,NULL,NULL,'2020-11-30 18:00:00',NULL);

INSERT INTO PLAYSFOR
	VALUES
('1111111111',101,'2020-01-31','2020-05-31'),
('2222222222',101,'2020-01-31','2020-12-31'),
('3333333333',101,'2020-01-31','2020-12-31'),
('5555555555',102,'2020-01-31','2020-05-31'),
('6666666666',102,'2020-01-31','2020-12-31'),
('7777777777',102,'2020-01-31','2020-05-31'),
('8888888888',103,'2020-01-31','2020-12-31'),
('9999999999',103,'2020-01-31','2020-05-31'),
('AAAAAAAAAA',103,'2019-01-31','2019-12-31'),
('1111111111',201,'2020-01-31','2020-05-31'),
('4444444444',201,'2020-01-31','2020-12-31'),
('5555555555',202,'2020-01-31','2020-05-31'),
('6666666666',202,'2020-01-31','2020-12-31'),
('1111111111',301,'2019-01-31','2019-12-31'),
('AAAAAAAAAA',301,'2019-01-31','2019-12-31');

SET FOREIGN_KEY_CHECKS=1; #Enable ALL foreign key constraint checks
